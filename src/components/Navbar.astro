---
// Define props for the component
interface Props {
  current?: string;
}

const { current } = Astro.props;
---

<header id="masthead" class="site-header outer">
  <div class="inner">
    <div class="site-header-inside">
      <div class="site-branding">
        <h1 class="site-title"><a href="/">Josh Wright</a></h1>
      </div>

      <button id="menu-open" class="menu-toggle" aria-label="Open Menu">
        <span class="icon-menu" aria-hidden="true"></span>
      </button>

      <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
        <div class="site-nav-inside">
          <button id="menu-close" class="menu-toggle" aria-label="Close Menu">
            <span class="icon-close" aria-hidden="true"></span>
          </button>
          <ul class="menu">
            <li class={`menu-item ${current === 'case-studies' ? 'current-menu-item' : ''}`}>
              <a href="/case-studies.html">Case studies</a>
            </li>
            <li class={`menu-item ${current === 'about' ? 'current-menu-item' : ''}`}>
              <a href="/index.html#about">About</a>
            </li>
            <!-- <li class={`menu-item ${current === 'testimonials' ? 'current-menu-item' : ''}`}>
              <a href="/index.html#testimonials">Testimonials</a>
            </li> -->
            <li class="menu-item">
              <a href="mailto:josh@joshux.com">Contact</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


<script>
  // Initialize mobile menu
  function initMobileMenu() {
    const menuOpen = document.getElementById('menu-open');
    const menuClose = document.getElementById('menu-close');
    const nav = document.getElementById('main-navigation');
    const siteHeader = document.getElementById('masthead');
    
    // Create overlay element
    const overlay = document.createElement('div');
    overlay.className = 'site-overlay';
    document.body.appendChild(overlay);
    
    if (menuOpen) {
      menuOpen.addEventListener('click', function() {
        nav.classList.add('is-open');
        overlay.classList.add('is-visible');
        document.body.style.overflow = 'hidden';
      });
    }
    
    if (menuClose) {
      menuClose.addEventListener('click', function() {
        nav.classList.remove('is-open');
        overlay.classList.remove('is-visible');
        document.body.style.overflow = '';
      });
    }
    
    overlay.addEventListener('click', function() {
      nav.classList.remove('is-open');
      overlay.classList.remove('is-visible');
      document.body.style.overflow = '';
    });
  }
  
  // Run after the DOM is loaded
  document.addEventListener('DOMContentLoaded', initMobileMenu);
</script>