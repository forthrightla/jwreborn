---
// src/pages/case-studies.astro
import Layout from "../layouts/Layout.astro";
import SimplifiedCard from "../components/SimplifiedCard.astro";
import { getCollection } from "astro:content";

// Get all case studies, filter out hidden ones, sorted by featured status
const allCaseStudies = await getCollection("case-studies");
const visibleCaseStudies = allCaseStudies.filter((study) => !study.data.hidden);
const caseStudies = visibleCaseStudies.sort((a, b) => {
  // Sort by featured first
  if (a.data.featured && !b.data.featured) return -1;
  if (!a.data.featured && b.data.featured) return 1;
  return 0;
});
---

<Layout
  title="Josh Wright - Case Studies | UX Design & Product Strategy"
  currentNav="case-studies"
  description="Explore case studies showcasing UX design, product strategy, and user research work across mobile apps, enterprise software, and consumer products."
>
  <section id="hero" class="block hero-block outer">
    <div class="inner">
      <div class="block-header">
        <h1 class="block-title">Research, strategy, and design work with <strong>measurable outcomes</strong></h1>
      </div>
    </div>
  </section>

  <main id="content" class="site-content">
    <section class="portfolio-block block outer" id="case-studies">
      <div class="inner">

        <div class="block-content">
          <div class="portfolio-feed">
            {caseStudies.map((study) => (
              <SimplifiedCard
                href={`/work/${study.slug}`}
                title={study.data.title}
                img={study.data.thumbnail}
                client={study.data.client}
                highlight={study.data.highlight}
              />
            ))}
          </div>
        </div>

        <div class="block-content">
          <p style="text-align:center;">
            <a href="mailto:josh@joshux.com" class="button">Get in touch</a>
          </p>
        </div>
      </div>
    </section>
  </main>
</Layout>
