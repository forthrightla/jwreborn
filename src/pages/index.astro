---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import Testimonial from "../components/Testimonial.astro";
import TestimonialsSection from "../components/TestimonialsSection.astro";
import Skill from "../components/Skill.astro";
import { getCollection } from "astro:content";
import FeaturedQuote from "../components/FeaturedQuote.astro";
import homepageData from "../data/homepage.json";

// Define the specific order by slug for homepage showcase
const homepageCaseStudies = [
  'axs-event-entry-case-study',
  'cerebral-case-study',
  'indeed-ai-case-study',
  'ribbon-legalzoom-case-study',
  // Add other slugs in the desired order
];

// Testimonials data
const testimonials = [
  {
    name: "Tiffany Wong",
    title: "UX Designer at Indeed",
    portrait: "/images/portrait-tiffany.jpeg",
    quote: "Josh has a strong passion for mentorship which I’ve undoubtedly benefited from. He skillfully communicates business decisions to influence stakeholders across all levels, resulting in stellar metric outcomes."
  },
  {
    name: "Louis Elfman",
    title: "Head of Design at Cerebral",
    portrait: "/images/portrait-louis.jpeg",
    quote: "It was with supreme confidence that I tapped Josh to run my initial research program at Cerebral. It had to both serve as a template and convince critical leadership, and as usual he delivered top shelf work."
  },
  {
    name: "Christine Catsifas",
    title: "UX Director at Indeed",
    portrait: "/images/portrait-christine.jpeg",
    quote: "Josh is a design leader who has significantly enhanced our team dynamics. His ability to quickly adapt and contribute effectively has been a catalyst for the success of multiple design efforts."
  },
  {
    name: "Bill Franz",
    title: "Associate UX Director at AXS",
    portrait: "/images/portrait-bill.jpeg",
    quote: "Josh conducted research that surfaced critical insights, framing them to stakeholders and execs in a concise way that provided a clear path forward. I’d jump at the chance to collaborate with him again."
  }
];

// Get all case studies
const allCaseStudies = await getCollection("case-studies");

// Create a map of case studies by slug for quick lookup
const caseStudiesBySlug = Object.fromEntries(
  allCaseStudies.map(study => [study.slug, study])
);

// Get case studies in the specified order
const featuredCaseStudies = homepageCaseStudies
  .map(slug => caseStudiesBySlug[slug])
  .filter(study => study) // Filter out any that don't exist
  .slice(0, 4);
---

<Layout
  title="Josh Wright - UX Designer, Product Strategist, Educator"
  description="Josh Wright is a UX Designer, Product Strategist, and Educator working in Austin. View case studies showcasing thoughtful design, user research, and measurable outcomes."
  image="/images/jw-logomark-filled.svg"
>
  <section id="hero" class="block hero-block outer">
    <div class="inner">
      <div class="block-header">
        <h1 class="block-title" set:html={homepageData.heroTitle.replace(/\b(UX Designer|Product Strategist|Educator|Austin)\b/g, '<strong>$1</strong>')}>
        </h1>
      </div>
    </div>
  </section>

  <section id="latest-projects" class="portfolio-block block outer">
    <div class="inner">
      <div class="block-header">
        <h2 class="block-title line-top">{homepageData.methodology.title}</h2>
      </div>
      <div class="block-content">
        <div class="expertise">
          {homepageData.methodology.skills.map(skill => (
            <Skill
              title={skill.title}
              description={skill.description}
              img={skill.icon}
            />
          ))}
        </div>
        <FeaturedQuote
              quote={homepageData.featuredQuote.quote}
              authorName={homepageData.featuredQuote.authorName}
              authorTitle={homepageData.featuredQuote.authorTitle}
              authorImage={homepageData.featuredQuote.authorImage}
            />

        <!-- <FeaturedQuote
            quote="Josh is a design leader who has significantly enhanced our team dynamics. His ability to quickly adapt and contribute effectively has been a catalyst for the success of multiple design efforts."
            authorName="Christine Catsifas"
            authorTitle="UX Design Director at Indeed"
            authorImage="/images/portrait-christine.jpeg"
          />   -->
      </div>
    </div>
  </section>
  
  <section class="portfolio-block block outer" id="case-studies">
    <div class="inner">
      <div class="block-header">
        <h2 class="block-title line-top">Selected case studies</h2>
      </div>
      <div class="block-content">
        <div class="portfolio-feed layout-tiles">
          {featuredCaseStudies.map(study => (
            <Card
              href={`/work/${study.slug}`}
              title={study.data.title}
              img={study.data.thumbnail}
              isPasswordProtected={!!study.data.password}
            />
          ))}
        </div>
        <div class="block-content">
          <p style="text-align:center;">
            <a href="/case-studies" class="button">More case studies</a>
          </p>
        </div>
      </div>
    </div>
  </section>
  
  <section class="about block outer" id="about">
    <div class="inner">
      <div class="block-inside">
        <div class="block-header">
          <h2 class="block-title line-top">{homepageData.about.title}</h2>
        </div>
      </div>
      <div class="post-thumbnail">
        <img src={homepageData.about.bannerImage} />
      </div>

      <div
        class="post-content inner-small"
        style="margin-bottom:64px;margin-top:64px;"
      >
        <h3>{homepageData.about.heading}</h3>
        <div set:html={homepageData.about.content.replace(/\n\n/g, '</p><p>').replace(/^/, '<p>').replace(/$/, '</p>').replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>').replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')}>
        </div>
      </div>
      <div class="logos-outer">
        <div class="logos-container">
          <div class="logo"><img src="images/logo-indeed.svg" alt="Indeed logo" /></div>
          <div class="logo"><img src="images/logo-ac4d.svg" alt="Austin Center for Design logo" /></div>
          <div class="logo"><img src="images/logo-legalzoom.png" alt="LegalZoom logo" /></div>
          <div class="logo"><img src="images/logo-axs.svg" alt="AXS logo" /></div>
        </div>
        <div class="logos-container">
          <div class="logo"><img src="images/logo-cerebral.svg" alt="Cerebral logo" /></div>
          <div class="logo"><img src="images/logo-make.svg" alt="Make Magazine logo" /></div>
          <div class="logo"><img src="images/logo-orly.svg" alt="O'Reilly logo" /></div>
          <div class="logo"><img src="images/logo-forthright.svg" alt="Forthright logo" /></div>
          <div class="logo"><img src="images/logo-tulane-sopa.svg" alt="Tulane University School of Professional Advancement logo" /></div>
        </div>
      </div>
    </div>
  </section>
  
<TestimonialsSection testimonials={testimonials} />
</Layout>